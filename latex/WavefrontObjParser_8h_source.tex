\hypertarget{WavefrontObjParser_8h_source}{}\doxysection{Wavefront\+Obj\+Parser.\+h}
\label{WavefrontObjParser_8h_source}\index{include/WavefrontObjParser.h@{include/WavefrontObjParser.h}}

\begin{DoxyCode}{0}
\DoxyCodeLine{1 \textcolor{comment}{// libdas: DENG asset handling management library}}
\DoxyCodeLine{2 \textcolor{comment}{// licence: Apache, see LICENCE file}}
\DoxyCodeLine{3 \textcolor{comment}{// file: WavefrontObjParser.h -\/ Wavefront Obj parser header file}}
\DoxyCodeLine{4 \textcolor{comment}{// author: Karl-\/Mihkel Ott}}
\DoxyCodeLine{5 }
\DoxyCodeLine{6 \textcolor{comment}{// NOTE: Curves and surfaces are not yet implemented, coming later}}
\DoxyCodeLine{7 }
\DoxyCodeLine{8 \textcolor{preprocessor}{\#ifndef WAVEFRONT\_OBJ\_PARSER\_H}}
\DoxyCodeLine{9 \textcolor{preprocessor}{\#define WAVEFRONT\_OBJ\_PARSER\_H}}
\DoxyCodeLine{10 }
\DoxyCodeLine{11 }
\DoxyCodeLine{12 \textcolor{preprocessor}{\#ifdef WAVEFRONT\_OBJ\_PARSER\_CPP}}
\DoxyCodeLine{13 \textcolor{preprocessor}{    \#include <string>}}
\DoxyCodeLine{14 \textcolor{preprocessor}{    \#include <cstring>}}
\DoxyCodeLine{15 \textcolor{preprocessor}{    \#include <fstream>}}
\DoxyCodeLine{16 \textcolor{preprocessor}{    \#include <iostream>}}
\DoxyCodeLine{17 \textcolor{preprocessor}{    \#include <vector>}}
\DoxyCodeLine{18 \textcolor{preprocessor}{    \#include <queue>}}
\DoxyCodeLine{19 \textcolor{preprocessor}{    \#include <utility>}}
\DoxyCodeLine{20 \textcolor{preprocessor}{    \#include <unordered\_map>}}
\DoxyCodeLine{21 \textcolor{preprocessor}{    \#include <memory>}}
\DoxyCodeLine{22 }
\DoxyCodeLine{23 \textcolor{preprocessor}{    \#include <Points.h>}}
\DoxyCodeLine{24 \textcolor{preprocessor}{    \#include <ErrorHandlers.h>}}
\DoxyCodeLine{25 \textcolor{preprocessor}{    \#include <AsciiStreamReader.h>}}
\DoxyCodeLine{26 \textcolor{preprocessor}{    \#include <AsciiLineReader.h>}}
\DoxyCodeLine{27 \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{28 }
\DoxyCodeLine{29 \textcolor{comment}{}}
\DoxyCodeLine{30 \textcolor{comment}{/// Import all structures}}
\DoxyCodeLine{31 \textcolor{comment}{}\textcolor{preprocessor}{\#include <WavefrontObjStructures.h>}}
\DoxyCodeLine{32 }
\DoxyCodeLine{33 }
\DoxyCodeLine{34 \textcolor{keyword}{namespace }\mbox{\hyperlink{namespaceLibdas}{Libdas}} \{}
\DoxyCodeLine{35 }
\DoxyCodeLine{36     \textcolor{keyword}{struct }\mbox{\hyperlink{structLibdas_1_1WavefrontObjStatementCallback}{WavefrontObjStatementCallback}} \{}
\DoxyCodeLine{37         WavefrontObjStatementType type;}
\DoxyCodeLine{38         \mbox{\hyperlink{namespaceLibdas_1_1WavefrontObjFunctions_a43eb0cfdbcb6a13be62cd3d67aa3aa3c}{WavefrontObjFunctions::PTR\_KeywordCallback}} keyword\_callback;}
\DoxyCodeLine{39 }
\DoxyCodeLine{40         \mbox{\hyperlink{structLibdas_1_1WavefrontObjStatementCallback}{WavefrontObjStatementCallback}}() : type(WAVEFRONT\_OBJ\_STATEMENT\_NONE), keyword\_callback(\textcolor{keyword}{nullptr}) \{\}}
\DoxyCodeLine{41 }
\DoxyCodeLine{42         \mbox{\hyperlink{structLibdas_1_1WavefrontObjStatementCallback}{WavefrontObjStatementCallback}}(\textcolor{keyword}{const} WavefrontObjStatementType \&\_type, \textcolor{keyword}{const} \mbox{\hyperlink{namespaceLibdas_1_1WavefrontObjFunctions_a43eb0cfdbcb6a13be62cd3d67aa3aa3c}{WavefrontObjFunctions::PTR\_KeywordCallback}} \&\_kw\_callback) :}
\DoxyCodeLine{43             type(\_type), keyword\_callback(\_kw\_callback) \{\}}
\DoxyCodeLine{44 }
\DoxyCodeLine{45         \textcolor{keywordtype}{void} operator=(\textcolor{keyword}{const} \mbox{\hyperlink{structLibdas_1_1WavefrontObjStatementCallback}{WavefrontObjStatementCallback}} \&\_val) \{}
\DoxyCodeLine{46             type = \_val.type;}
\DoxyCodeLine{47             keyword\_callback = \_val.keyword\_callback;}
\DoxyCodeLine{48         \}}
\DoxyCodeLine{49     \};}
\DoxyCodeLine{50 }
\DoxyCodeLine{51 \textcolor{comment}{}}
\DoxyCodeLine{52 \textcolor{comment}{    /**}}
\DoxyCodeLine{53 \textcolor{comment}{     * Interface to parse Wavefront OBJ files}}
\DoxyCodeLine{54 \textcolor{comment}{     */}}
\DoxyCodeLine{55     \textcolor{keyword}{class }\mbox{\hyperlink{classLibdas_1_1WavefrontObjParser}{WavefrontObjParser}} : \textcolor{keyword}{public} \mbox{\hyperlink{classLibdas_1_1AsciiLineReader}{AsciiLineReader}} \{}
\DoxyCodeLine{56         \textcolor{keyword}{private}:}
\DoxyCodeLine{57             std::unordered\_map<std::string, WavefrontObjStatementCallback> m\_statement\_map;}
\DoxyCodeLine{58             \textcolor{comment}{//std::vector<std::unique\_ptr<AsciiStreamReader>> m\_mtl\_streams;}}
\DoxyCodeLine{59             uint32\_t m\_parse\_pos = 1;}
\DoxyCodeLine{60             std::string m\_file\_name;}
\DoxyCodeLine{61             \mbox{\hyperlink{classLibdas_1_1AsciiFormatErrorHandler}{AsciiFormatErrorHandler}} m\_error;}
\DoxyCodeLine{62             WavefrontObjFunctions::Groups m\_groups;}
\DoxyCodeLine{63 }
\DoxyCodeLine{64         \textcolor{keyword}{private}:\textcolor{comment}{}}
\DoxyCodeLine{65 \textcolor{comment}{            /** }}
\DoxyCodeLine{66 \textcolor{comment}{             * Create all possible tokens to consider for Wavefront Obj format}}
\DoxyCodeLine{67 \textcolor{comment}{             */}}
\DoxyCodeLine{68             \textcolor{keywordtype}{void} \mbox{\hyperlink{classLibdas_1_1WavefrontObjParser_af7bfd0a3935377926f4a30d808013ed9}{\_Tokenize}}();\textcolor{comment}{}}
\DoxyCodeLine{69 \textcolor{comment}{            /**}}
\DoxyCodeLine{70 \textcolor{comment}{             * Analyse keyword meaning and return the keyword type or throw unknown keyword error}}
\DoxyCodeLine{71 \textcolor{comment}{             * @param \_pos is a pointer that defines the keyword starting position}}
\DoxyCodeLine{72 \textcolor{comment}{             * @param \_end is a pointer that defines the keyword ending position}}
\DoxyCodeLine{73 \textcolor{comment}{             * @return WavefrontObjStatementType if the given keyword is valid}}
\DoxyCodeLine{74 \textcolor{comment}{             */}}
\DoxyCodeLine{75             \mbox{\hyperlink{structLibdas_1_1WavefrontObjStatementCallback}{WavefrontObjStatementCallback}} \mbox{\hyperlink{classLibdas_1_1WavefrontObjParser_aa26c4fc74310227aa0aa7426d4b97974}{\_AnalyseKeyword}}(\textcolor{keywordtype}{char} *\_end);\textcolor{comment}{}}
\DoxyCodeLine{76 \textcolor{comment}{            /**}}
\DoxyCodeLine{77 \textcolor{comment}{             * Analyse arguments and push them into correct data structures}}
\DoxyCodeLine{78 \textcolor{comment}{             * @param \_callback is an instance to WavefrontObjStatementCallback}}
\DoxyCodeLine{79 \textcolor{comment}{             * @param \_args are all arguments given in a string value}}
\DoxyCodeLine{80 \textcolor{comment}{             */}}
\DoxyCodeLine{81             \textcolor{keywordtype}{void} \mbox{\hyperlink{classLibdas_1_1WavefrontObjParser_a252f5d8e6a92f2a4b576105e7d990f0f}{\_AnalyseArgs}}(\mbox{\hyperlink{structLibdas_1_1WavefrontObjStatementCallback}{WavefrontObjStatementCallback}} \_callback, std::vector<std::string> \&\_args);}
\DoxyCodeLine{82 }
\DoxyCodeLine{83         \textcolor{keyword}{public}:}
\DoxyCodeLine{84             \mbox{\hyperlink{classLibdas_1_1WavefrontObjParser}{WavefrontObjParser}}(\textcolor{keyword}{const} std::string \&\_file\_name = \textcolor{stringliteral}{"{}"{}}, \textcolor{keywordtype}{size\_t} \_chunk\_size = DEFAULT\_CHUNK);\textcolor{comment}{}}
\DoxyCodeLine{85 \textcolor{comment}{            /** }}
\DoxyCodeLine{86 \textcolor{comment}{             * Parse the whole new file }}
\DoxyCodeLine{87 \textcolor{comment}{             * @param \_file\_name is an optional argument to use when parsing the Wavefront OBJ file}}
\DoxyCodeLine{88 \textcolor{comment}{             */}}
\DoxyCodeLine{89             \textcolor{keywordtype}{void} \mbox{\hyperlink{classLibdas_1_1WavefrontObjParser_a3f707086f73cef5ba39721de782f3883}{Parse}}(\textcolor{keyword}{const} std::string \&\_file\_name);\textcolor{comment}{}}
\DoxyCodeLine{90 \textcolor{comment}{            /** }}
\DoxyCodeLine{91 \textcolor{comment}{             * Parse the whole currently open file }}
\DoxyCodeLine{92 \textcolor{comment}{             */}}
\DoxyCodeLine{93             \textcolor{keywordtype}{void} \mbox{\hyperlink{classLibdas_1_1WavefrontObjParser_ab597880b47169f26e458351c249d01b2}{Parse}}();\textcolor{comment}{}}
\DoxyCodeLine{94 \textcolor{comment}{            /**}}
\DoxyCodeLine{95 \textcolor{comment}{             * Triangulate all non-\/triangular groups and insert new triangles between faces}}
\DoxyCodeLine{96 \textcolor{comment}{             */}}
\DoxyCodeLine{97             \textcolor{keywordtype}{void} \mbox{\hyperlink{classLibdas_1_1WavefrontObjParser_a45c265bd7532f432e248a3be1d778f5c}{TriangulateGroups}}();\textcolor{comment}{}}
\DoxyCodeLine{98 \textcolor{comment}{            /**}}
\DoxyCodeLine{99 \textcolor{comment}{             * Get all parsed WavefrontObj groups}}
\DoxyCodeLine{100 \textcolor{comment}{             * @return reference to std::vector<WavefrontObjGroup>}}
\DoxyCodeLine{101 \textcolor{comment}{             */}}
\DoxyCodeLine{102             \textcolor{keyword}{const} WavefrontObjFunctions::Groups \&\mbox{\hyperlink{classLibdas_1_1WavefrontObjParser_acc5a08692cf81a348367bfbfc50ab81c}{GetParsedGroups}}();}
\DoxyCodeLine{103     \};}
\DoxyCodeLine{104 \}}
\DoxyCodeLine{105 }
\DoxyCodeLine{106 \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{107 }

\end{DoxyCode}
