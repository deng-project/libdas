\hypertarget{DASTool_8h_source}{}\doxysection{DASTool.\+h}
\label{DASTool_8h_source}\index{include/DASTool.h@{include/DASTool.h}}

\begin{DoxyCode}{0}
\DoxyCodeLine{1 \textcolor{comment}{/// libdas: DENG asset handling management library}\textcolor{comment}{}}
\DoxyCodeLine{2 \textcolor{comment}{/// licence: Apache, see LICENCE file}}
\DoxyCodeLine{3 \textcolor{comment}{/// file: DASTool.h -\/ header for CLI tool that manages DAS files and creates new DAS files from other 3D model formats }}
\DoxyCodeLine{4 \textcolor{comment}{/// author: Karl-\/Mihkel Ott}}
\DoxyCodeLine{5 \textcolor{comment}{}\textcolor{preprocessor}{\#ifndef DAS\_TOOL\_H}}
\DoxyCodeLine{6 \textcolor{preprocessor}{\#define DAS\_TOOL\_H}}
\DoxyCodeLine{7 }
\DoxyCodeLine{8 \textcolor{preprocessor}{\#ifdef DAS\_TOOL\_CPP}}
\DoxyCodeLine{9 \textcolor{preprocessor}{    \#include <any>}}
\DoxyCodeLine{10 \textcolor{preprocessor}{    \#include <string>}}
\DoxyCodeLine{11 \textcolor{preprocessor}{    \#include <ctime>}}
\DoxyCodeLine{12 \textcolor{preprocessor}{    \#include <fstream>}}
\DoxyCodeLine{13 \textcolor{preprocessor}{    \#include <iostream>}}
\DoxyCodeLine{14 \textcolor{preprocessor}{    \#include <cstring>}}
\DoxyCodeLine{15 \textcolor{preprocessor}{    \#include <vector>}}
\DoxyCodeLine{16 \textcolor{preprocessor}{    \#include <stdexcept>}}
\DoxyCodeLine{17 \textcolor{preprocessor}{    \#include <unordered\_map>}}
\DoxyCodeLine{18     }
\DoxyCodeLine{19 \textcolor{preprocessor}{    \#include <FileNameString.h>}}
\DoxyCodeLine{20 \textcolor{preprocessor}{    \#include <LibdasAssert.h>}}
\DoxyCodeLine{21 \textcolor{preprocessor}{    \#include <ErrorHandlers.h>}}
\DoxyCodeLine{22 \textcolor{preprocessor}{    \#include <AsciiStreamReader.h>}}
\DoxyCodeLine{23 \textcolor{preprocessor}{    \#include <AsciiLineReader.h>}}
\DoxyCodeLine{24 \textcolor{preprocessor}{    \#include <Points.h>}}
\DoxyCodeLine{25 \textcolor{preprocessor}{    \#include <Vector.h>}}
\DoxyCodeLine{26 \textcolor{preprocessor}{    \#include <Matrix.h>}}
\DoxyCodeLine{27 \textcolor{preprocessor}{    \#include <DasStructures.h>}}
\DoxyCodeLine{28 \textcolor{preprocessor}{    \#include <DasWriterCore.h>}}
\DoxyCodeLine{29 \textcolor{preprocessor}{    \#include <DasReaderCore.h>}}
\DoxyCodeLine{30 \textcolor{preprocessor}{    \#include <DasParser.h>}}
\DoxyCodeLine{31 \textcolor{preprocessor}{    \#include <STLStructures.h>}}
\DoxyCodeLine{32 \textcolor{preprocessor}{    \#include <STLParser.h>}}
\DoxyCodeLine{33 \textcolor{preprocessor}{    \#include <STLCompiler.h>}}
\DoxyCodeLine{34 \textcolor{preprocessor}{    \#include <WavefrontObjStructures.h>}}
\DoxyCodeLine{35 \textcolor{preprocessor}{    \#include <WavefrontObjParser.h>}}
\DoxyCodeLine{36 \textcolor{preprocessor}{    \#include <WavefrontObjCompiler.h>}}
\DoxyCodeLine{37 \textcolor{preprocessor}{\#endif}}
\DoxyCodeLine{38 }
\DoxyCodeLine{39 \textcolor{keyword}{typedef} uint8\_t FlagType;}
\DoxyCodeLine{40 \textcolor{preprocessor}{\#define OUTPUT\_FLAG\_COMPRESSED      0x01}}
\DoxyCodeLine{41 \textcolor{preprocessor}{\#define OUTPUT\_FLAG\_NO\_CURVES       0x02}}
\DoxyCodeLine{42 \textcolor{preprocessor}{\#define OUTPUT\_FLAG\_AUTHOR          0x04}}
\DoxyCodeLine{43 \textcolor{preprocessor}{\#define OUTPUT\_FLAG\_COPYRIGHT       0x08}}
\DoxyCodeLine{44 \textcolor{preprocessor}{\#define OUTPUT\_FLAG\_MODEL           0x10}}
\DoxyCodeLine{45 \textcolor{preprocessor}{\#define OUTPUT\_FLAG\_VERBOSE         0x20}}
\DoxyCodeLine{46 \textcolor{preprocessor}{\#define OUTPUT\_FLAG\_OUT\_FILE        0x40}}
\DoxyCodeLine{47 }
\DoxyCodeLine{48 \textcolor{preprocessor}{\#define VERSION\_MAJOR       0}}
\DoxyCodeLine{49 \textcolor{preprocessor}{\#define VERSION\_MINOR       1}}
\DoxyCodeLine{50 }
\DoxyCodeLine{51 \textcolor{comment}{// unused}}
\DoxyCodeLine{52 }
\DoxyCodeLine{53 \textcolor{comment}{//enum FileType \{}}
\DoxyCodeLine{54     \textcolor{comment}{//FILE\_STL,}}
\DoxyCodeLine{55     \textcolor{comment}{//FILE\_WAVEFRONT\_OBJ,}}
\DoxyCodeLine{56     \textcolor{comment}{//FILE\_GLTF,}}
\DoxyCodeLine{57     \textcolor{comment}{//FILE\_GLB,}}
\DoxyCodeLine{58     \textcolor{comment}{//FILE\_DAS,}}
\DoxyCodeLine{59     \textcolor{comment}{//FILE\_DASC}}
\DoxyCodeLine{60 \textcolor{comment}{//\};}}
\DoxyCodeLine{61 }
\DoxyCodeLine{62 }
\DoxyCodeLine{63 \textcolor{keyword}{class }\mbox{\hyperlink{classDASTool}{DASTool}} \{}
\DoxyCodeLine{64     \textcolor{keyword}{private}:}
\DoxyCodeLine{65         \textcolor{keyword}{const} std::string m\_help\_text = \textcolor{stringliteral}{"{}Usage: DASTool convert|list <input file> [output options]\(\backslash\)n"{}};}
\DoxyCodeLine{66         std::unordered\_map<std::string, FlagType> m\_flag\_map = \{}
\DoxyCodeLine{67             std::make\_pair(\textcolor{stringliteral}{"{}-\/c"{}}, OUTPUT\_FLAG\_COMPRESSED),}
\DoxyCodeLine{68             std::make\_pair(\textcolor{stringliteral}{"{}-\/-\/compressed"{}}, OUTPUT\_FLAG\_COMPRESSED),}
\DoxyCodeLine{69             std::make\_pair(\textcolor{stringliteral}{"{}-\/-\/no-\/curves"{}}, OUTPUT\_FLAG\_NO\_CURVES),}
\DoxyCodeLine{70             std::make\_pair(\textcolor{stringliteral}{"{}-\/-\/author"{}}, OUTPUT\_FLAG\_AUTHOR),}
\DoxyCodeLine{71             std::make\_pair(\textcolor{stringliteral}{"{}-\/-\/copyright"{}}, OUTPUT\_FLAG\_COPYRIGHT),}
\DoxyCodeLine{72             std::make\_pair(\textcolor{stringliteral}{"{}-\/-\/model"{}}, OUTPUT\_FLAG\_MODEL),}
\DoxyCodeLine{73             std::make\_pair(\textcolor{stringliteral}{"{}-\/v"{}}, OUTPUT\_FLAG\_VERBOSE),}
\DoxyCodeLine{74             std::make\_pair(\textcolor{stringliteral}{"{}-\/-\/verbose"{}}, OUTPUT\_FLAG\_VERBOSE),}
\DoxyCodeLine{75             std::make\_pair(\textcolor{stringliteral}{"{}-\/o"{}}, OUTPUT\_FLAG\_OUT\_FILE),}
\DoxyCodeLine{76             std::make\_pair(\textcolor{stringliteral}{"{}-\/-\/output"{}}, OUTPUT\_FLAG\_OUT\_FILE)}
\DoxyCodeLine{77         \};}
\DoxyCodeLine{78         FlagType m\_flags = 0;}
\DoxyCodeLine{79         \mbox{\hyperlink{structLibdas_1_1DasProperties}{Libdas::DasProperties}} m\_props;}
\DoxyCodeLine{80         std::string m\_author = std::string(\textcolor{stringliteral}{"{}DASTool v"{}}) + std::to\_string(VERSION\_MAJOR) + std::string(\textcolor{stringliteral}{"{}."{}}) + std::to\_string(VERSION\_MINOR);}
\DoxyCodeLine{81         std::string m\_model = \textcolor{stringliteral}{"{}"{}};}
\DoxyCodeLine{82         std::string m\_copyright = \textcolor{stringliteral}{"{}"{}};}
\DoxyCodeLine{83         std::string m\_out\_file;}
\DoxyCodeLine{84 }
\DoxyCodeLine{85     \textcolor{keyword}{private}:\textcolor{comment}{}}
\DoxyCodeLine{86 \textcolor{comment}{        ////////////////////////////////////}}
\DoxyCodeLine{87 \textcolor{comment}{}        \textcolor{comment}{// ***** Conversion methods ***** //}\textcolor{comment}{}}
\DoxyCodeLine{88 \textcolor{comment}{        ////////////////////////////////////}}
\DoxyCodeLine{89 \textcolor{comment}{}        \textcolor{comment}{}}
\DoxyCodeLine{90 \textcolor{comment}{        /**}}
\DoxyCodeLine{91 \textcolor{comment}{         * Convert STL file into DAS file. Output file will be either provided}}
\DoxyCodeLine{92 \textcolor{comment}{         * output file or input file name with das extension}}
\DoxyCodeLine{93 \textcolor{comment}{         * @param \_input\_file is specified STL file to read from}}
\DoxyCodeLine{94 \textcolor{comment}{         */}}
\DoxyCodeLine{95         \textcolor{keywordtype}{void} \mbox{\hyperlink{classDASTool_aeb83d13c8cc8181d217334c7923ae953}{\_ConvertSTL}}(\textcolor{keyword}{const} std::string \&\_input\_file);\textcolor{comment}{}}
\DoxyCodeLine{96 \textcolor{comment}{        /**}}
\DoxyCodeLine{97 \textcolor{comment}{         * Convert Wavefront Obj file into DAS file. Output file will be either provided}}
\DoxyCodeLine{98 \textcolor{comment}{         * output file or input file name with das extension}}
\DoxyCodeLine{99 \textcolor{comment}{         * @param \_input\_file is specified Wavefront Obj file to read from}}
\DoxyCodeLine{100 \textcolor{comment}{         */}}
\DoxyCodeLine{101         \textcolor{keywordtype}{void} \mbox{\hyperlink{classDASTool_ab1138e7143d64495b43255f83e0e05ec}{\_ConvertWavefrontObj}}(\textcolor{keyword}{const} std::string \&\_input\_file);\textcolor{comment}{}}
\DoxyCodeLine{102 \textcolor{comment}{        /**}}
\DoxyCodeLine{103 \textcolor{comment}{         * Convert GLTF file into DAS file. Output file will be either provided}}
\DoxyCodeLine{104 \textcolor{comment}{         * output file or input file name with das extension}}
\DoxyCodeLine{105 \textcolor{comment}{         * @param \_input\_file is specified GLTF file to read from}}
\DoxyCodeLine{106 \textcolor{comment}{         */}}
\DoxyCodeLine{107         \textcolor{keywordtype}{void} \mbox{\hyperlink{classDASTool_a912c307d114eb14045b4aab33fa9934d}{\_ConvertGLTF}}(\textcolor{keyword}{const} std::string \&\_input\_file);\textcolor{comment}{}}
\DoxyCodeLine{108 \textcolor{comment}{        /**}}
\DoxyCodeLine{109 \textcolor{comment}{         * Convert GLB file into DAS file. Output file will be either provided output}}
\DoxyCodeLine{110 \textcolor{comment}{         * file or input file name with das extension}}
\DoxyCodeLine{111 \textcolor{comment}{         * @param \_input\_file is specified GLB file to read from}}
\DoxyCodeLine{112 \textcolor{comment}{         */}}
\DoxyCodeLine{113         \textcolor{keywordtype}{void} \mbox{\hyperlink{classDASTool_a08740ca8a7a05155f561d104edda1be5}{\_ConvertGLB}}(\textcolor{keyword}{const} std::string \&\_input\_file);}
\DoxyCodeLine{114 \textcolor{comment}{}}
\DoxyCodeLine{115 \textcolor{comment}{        /////////////////////////////////}}
\DoxyCodeLine{116 \textcolor{comment}{}        \textcolor{comment}{// ***** Listing methods ***** //}\textcolor{comment}{}}
\DoxyCodeLine{117 \textcolor{comment}{        /////////////////////////////////}}
\DoxyCodeLine{118 \textcolor{comment}{}\textcolor{comment}{}}
\DoxyCodeLine{119 \textcolor{comment}{        /**}}
\DoxyCodeLine{120 \textcolor{comment}{         * List render attributes of given Wavefront Obj group}}
\DoxyCodeLine{121 \textcolor{comment}{         * @param \_group is a reference to WavefrontObjGroup where render attributes are read}}
\DoxyCodeLine{122 \textcolor{comment}{         */}}
\DoxyCodeLine{123         \textcolor{keywordtype}{void} \mbox{\hyperlink{classDASTool_a98b79dffbbf6f7c54c183143cf1ead7f}{\_ListWavefrontObjRenderAttributes}}(\textcolor{keyword}{const} \mbox{\hyperlink{structLibdas_1_1WavefrontObjGroup}{Libdas::WavefrontObjGroup}} \&\_group);}
\DoxyCodeLine{124         \textcolor{comment}{}}
\DoxyCodeLine{125 \textcolor{comment}{        /**}}
\DoxyCodeLine{126 \textcolor{comment}{         * List data from STL file to stdout}}
\DoxyCodeLine{127 \textcolor{comment}{         * @param \_input\_file specifies the STL file to read}}
\DoxyCodeLine{128 \textcolor{comment}{         */}}
\DoxyCodeLine{129         \textcolor{keywordtype}{void} \mbox{\hyperlink{classDASTool_a44c02a92b4422d1670f80aac217de439}{\_ListSTL}}(\textcolor{keyword}{const} std::string \&\_input\_file);\textcolor{comment}{}}
\DoxyCodeLine{130 \textcolor{comment}{        /**}}
\DoxyCodeLine{131 \textcolor{comment}{         * List data from Wavefront Obj file to stdout}}
\DoxyCodeLine{132 \textcolor{comment}{         * @param \_input\_file specifies the Wavefront Obj file to read}}
\DoxyCodeLine{133 \textcolor{comment}{         */}}
\DoxyCodeLine{134         \textcolor{keywordtype}{void} \mbox{\hyperlink{classDASTool_a773825e761c3502d9eb2c3fd3b371bb0}{\_ListWavefrontObj}}(\textcolor{keyword}{const} std::string \&\_input\_file);\textcolor{comment}{}}
\DoxyCodeLine{135 \textcolor{comment}{        /**}}
\DoxyCodeLine{136 \textcolor{comment}{         * List data from GLTF file to stdout}}
\DoxyCodeLine{137 \textcolor{comment}{         * @param \_input\_file specifies the GLTF file to read}}
\DoxyCodeLine{138 \textcolor{comment}{         */}}
\DoxyCodeLine{139         \textcolor{keywordtype}{void} \mbox{\hyperlink{classDASTool_ae038ece75480adac1658c19e7217f7ae}{\_ListGLTF}}(\textcolor{keyword}{const} std::string \&\_input\_file);\textcolor{comment}{}}
\DoxyCodeLine{140 \textcolor{comment}{        /**}}
\DoxyCodeLine{141 \textcolor{comment}{         * List data from GLB file to stdout}}
\DoxyCodeLine{142 \textcolor{comment}{         * @param \_input\_file specifies the GLB file to read}}
\DoxyCodeLine{143 \textcolor{comment}{         */}}
\DoxyCodeLine{144         \textcolor{keywordtype}{void} \mbox{\hyperlink{classDASTool_add3314f5a8e2048d57a078f91c7e2b6e}{\_ListGLB}}(\textcolor{keyword}{const} std::string \&\_input\_file);\textcolor{comment}{}}
\DoxyCodeLine{145 \textcolor{comment}{        /**}}
\DoxyCodeLine{146 \textcolor{comment}{         * List all data about scenes to stdout}}
\DoxyCodeLine{147 \textcolor{comment}{         * @param \_scenes specifies all scenes that are used}}
\DoxyCodeLine{148 \textcolor{comment}{         */}}
\DoxyCodeLine{149         \textcolor{keywordtype}{void} \mbox{\hyperlink{classDASTool_a2bd821a68f90a0f78af2091bf0ae74d3}{\_ListDasScenes}}(\textcolor{keyword}{const} std::vector<Libdas::DasScene> \&\_scenes);\textcolor{comment}{}}
\DoxyCodeLine{150 \textcolor{comment}{        /**}}
\DoxyCodeLine{151 \textcolor{comment}{         * List all data about all models that were parsed}}
\DoxyCodeLine{152 \textcolor{comment}{         * @param \_parser is a reference to DasParser instance that specifies the parser used}}
\DoxyCodeLine{153 \textcolor{comment}{         */}}
\DoxyCodeLine{154         \textcolor{keywordtype}{void} \mbox{\hyperlink{classDASTool_ad1a0e68a0aa3c91774c669778fe7bf2e}{\_ListDasModels}}(\mbox{\hyperlink{classLibdas_1_1DasParser}{Libdas::DasParser}} \&\_parser);\textcolor{comment}{}}
\DoxyCodeLine{155 \textcolor{comment}{        /**}}
\DoxyCodeLine{156 \textcolor{comment}{         * List all data about all animations that were parsed}}
\DoxyCodeLine{157 \textcolor{comment}{         * @param \_parser is a reference to DasParser instance that specifies the parser used}}
\DoxyCodeLine{158 \textcolor{comment}{         */}}
\DoxyCodeLine{159         \textcolor{keywordtype}{void} \mbox{\hyperlink{classDASTool_a845ea19d7bcb39d6883e056bcf8aa696}{\_ListDasAnimations}}(\mbox{\hyperlink{classLibdas_1_1DasParser}{Libdas::DasParser}} \&\_parser);\textcolor{comment}{}}
\DoxyCodeLine{160 \textcolor{comment}{        /**}}
\DoxyCodeLine{161 \textcolor{comment}{         * List data from DAS file to stdout}}
\DoxyCodeLine{162 \textcolor{comment}{         * @param \_input\_file specifies the DAS file to read}}
\DoxyCodeLine{163 \textcolor{comment}{         */}}
\DoxyCodeLine{164         \textcolor{keywordtype}{void} \mbox{\hyperlink{classDASTool_a35e979842fbf7f00ee4436f86f2bfd01}{\_ListDas}}(\textcolor{keyword}{const} std::string \&\_input\_file);\textcolor{comment}{}}
\DoxyCodeLine{165 \textcolor{comment}{        /**}}
\DoxyCodeLine{166 \textcolor{comment}{         * Parse all string output flags into bitmask values}}
\DoxyCodeLine{167 \textcolor{comment}{         * @param \_opts is a const std::vector reference that holds all string flags}}
\DoxyCodeLine{168 \textcolor{comment}{         */}}
\DoxyCodeLine{169         \textcolor{keywordtype}{void} \mbox{\hyperlink{classDASTool_ab60484c671579bb65977f4c1ed73421b}{\_ParseFlags}}(\textcolor{keyword}{const} std::vector<std::string> \&\_opts);\textcolor{comment}{}}
\DoxyCodeLine{170 \textcolor{comment}{        /**}}
\DoxyCodeLine{171 \textcolor{comment}{         * Exclude all invalid options according to the specified mode}}
\DoxyCodeLine{172 \textcolor{comment}{         * @param \_is\_convert is true if the convertion mode was requested}}
\DoxyCodeLine{173 \textcolor{comment}{         */}}
\DoxyCodeLine{174         \textcolor{keywordtype}{void} \mbox{\hyperlink{classDASTool_a3edca1c8e3be71bbb227fb2423e0f0a5}{\_ExcludeFlags}}(\textcolor{keywordtype}{bool} \_is\_convert);}
\DoxyCodeLine{175 }
\DoxyCodeLine{176     \textcolor{keyword}{public}:\textcolor{comment}{}}
\DoxyCodeLine{177 \textcolor{comment}{        /**}}
\DoxyCodeLine{178 \textcolor{comment}{         * Convert from specified file to DAS file format}}
\DoxyCodeLine{179 \textcolor{comment}{         * @param \_input\_file specifies the input file used for conversion to DAS format}}
\DoxyCodeLine{180 \textcolor{comment}{         * @param \_opts specifies output options }}
\DoxyCodeLine{181 \textcolor{comment}{         */}}
\DoxyCodeLine{182         \textcolor{keywordtype}{void} \mbox{\hyperlink{classDASTool_a98941a8b18b34be7da6871164ed0bd24}{Convert}}(\textcolor{keyword}{const} std::string \&\_input\_file, \textcolor{keyword}{const} std::vector<std::string> \&\_opts);\textcolor{comment}{}}
\DoxyCodeLine{183 \textcolor{comment}{        /**}}
\DoxyCodeLine{184 \textcolor{comment}{         * List all information about current file}}
\DoxyCodeLine{185 \textcolor{comment}{         * @param \_input\_file specifies the input file used for reading}}
\DoxyCodeLine{186 \textcolor{comment}{         * @param \_opts specifies output options}}
\DoxyCodeLine{187 \textcolor{comment}{         */}}
\DoxyCodeLine{188         \textcolor{keywordtype}{void} \mbox{\hyperlink{classDASTool_ae7f28bf802e0fec2275b2cb2e4c3eb48}{List}}(\textcolor{keyword}{const} std::string \&\_input\_file, \textcolor{keyword}{const} std::vector<std::string> \&\_opts);\textcolor{comment}{}}
\DoxyCodeLine{189 \textcolor{comment}{        /**}}
\DoxyCodeLine{190 \textcolor{comment}{         * Get DASTool help text}}
\DoxyCodeLine{191 \textcolor{comment}{         */}}
\DoxyCodeLine{192         \textcolor{keyword}{const} std::string \&\mbox{\hyperlink{classDASTool_a28d0f104282a619cebe9ae0b77cfbde1}{GetHelpText}}();}
\DoxyCodeLine{193 \};}
\DoxyCodeLine{194 }
\DoxyCodeLine{195 \textcolor{preprocessor}{\#endif}}

\end{DoxyCode}
